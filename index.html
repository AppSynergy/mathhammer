<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Main</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="dist/css/main.css">
  </head>
  <body>
    <div id="app"></div>
    <script src="dist/js/main.js"></script>
    <script src="bower_components/chart.js/dist/Chart.min.js"></script>
    <script>

    var node = document.getElementById('app');
    var app = Elm.Main.embed(node);
    var chart = [];

    app.ports.drawChart.subscribe(function(data) {

      var id = data[0];
      var canvas = document.getElementById(id);
      if (canvas) {
        var ctx = canvas.getContext("2d");

        if (exists = chart[id]) {
          exists.destroy();
        }

        chart[id] = new Chart(ctx, {
          type: 'bar',
          data: data[1],
          options: data[2],
        });
      }
    });

    </script>
  </body>
</html>
